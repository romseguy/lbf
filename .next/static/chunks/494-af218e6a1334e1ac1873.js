(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[494],{73494:function(e,n,t){"use strict";t.d(n,{V:function(){return j}});var r=t(38347),o=t(67294),l=t(69822),a=t(27302),i=t(45754),s=t(64115),u=t(34078),c=t(1424),v=t(68718),d=t(48017),m=t(70058),g=t(46529),f=t(64494),p=t(29238),h=t.n(p),b=t(73935),x=t(97877),Z=t(35011),z=t(56185),y=t(70917);var C={name:"oze4vv",styles:"height:18px;width:18px"},w={name:"oze4vv",styles:"height:18px;width:18px"},S={name:"oze4vv",styles:"height:18px;width:18px"},k={name:"k7f9my",styles:"background:none rgb(255, 255, 255);border:0px;margin:10px;padding:0px;text-transform:none;appearance:none;position:absolute;cursor:pointer;user-select:none;border-radius:2px;height:40px;width:40px;box-shadow:rgba(0, 0, 0, 0.3) 0px 1px 4px -1px;overflow:hidden;top:0px;right:0px"},D=function(e){var n=e.onClick,t=(0,o.useState)(!1),r=t[0],l=t[1];return(0,y.tZ)(z.z,{className:"gm-control-active gm-fullscreen-control",draggable:"false","aria-label":"Passer en plein \xe9cran",title:"Passer en plein \xe9cran",type:"button",onClick:function(){var e=!r;l(e),n&&n(e)},css:k},(0,y.tZ)(o.Fragment,null,(0,y.tZ)("img",{src:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2018%2018%22%3E%3Cpath%20fill%3D%22%23666%22%20d%3D%22M0%200v6h2V2h4V0H0zm16%200h-4v2h4v4h2V0h-2zm0%2016h-4v2h6v-6h-2v4zM2%2012H0v6h6v-2H2v-4z%22/%3E%3C/svg%3E",alt:"",css:S}),(0,y.tZ)("img",{src:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2018%2018%22%3E%3Cpath%20fill%3D%22%23333%22%20d%3D%22M0%200v6h2V2h4V0H0zm16%200h-4v2h4v4h2V0h-2zm0%2016h-4v2h6v-6h-2v4zM2%2012H0v6h6v-2H2v-4z%22/%3E%3C/svg%3E",alt:"",css:w}),(0,y.tZ)("img",{src:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2018%2018%22%3E%3Cpath%20fill%3D%22%23111%22%20d%3D%22M0%200v6h2V2h4V0H0zm16%200h-4v2h4v4h2V0h-2zm0%2016h-4v2h6v-6h-2v4zM2%2012H0v6h6v-2H2v-4z%22/%3E%3C/svg%3E",alt:"",css:C})))},N=t(94878),A=t(96699),I=function(e){var n,t=e.key,r=e.item,o=(e.lat,e.lng,e.zoomLevel),l=e.setItemToShow,a="eventName"in r?r.eventName:r.orgName,i=o>16;i&&(n="\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: auto;\n    height: auto;\n    padding: 8px;\n    color: black;\n    background-color: white;\n    border: 2px solid black;\n    border-radius: 12px;\n    user-select: none;\n    transform: translate(-50%, -50%);\n    cursor: pointer;\n    ");var s=(0,y.tZ)(d.xu,{css:(0,y.iv)(n||"\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 18px;\n  height: 18px;\n  background-color: red;\n  border: 2px solid #fff;\n  border-radius: 100%;\n  user-select: none;\n  transform: translate(-50%, -50%);\n  cursor: pointer;\n","",""),_hover:{bgColor:"green",zIndex:1},onClick:function(){return l(r)}},i?(0,y.tZ)(x.rU,{className:"rainbow-text",size:"larger"},a):"");return(0,y.tZ)("div",{key:t},i?s:(0,y.tZ)(A.u,{label:a},s))},V=t(64263);function M(e,n){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return E(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return E(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,l=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw l}}}}function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var H={lat:43.0555331,lng:2.2126466},L={name:"k4khca",styles:"letter-spacing:0.1em"},_=(0,N.q)({apiKey:"AIzaSyBW6lVlo-kbzkD3bThsccdDilCdb8_CPH8"})((function(e){var n=e.center,t=e.events,l=e.orgs,p=(e.size,e.onFullscreenControlClick),z=(0,r.Z)(e,["center","events","orgs","size","onFullscreenControlClick"]),C=(0,o.useState)(null),w=C[0],S=C[1],k=(0,o.useState)(10),N=k[0],A=k[1],E=(0,o.useRef)(null),_={fullscreenControl:!1},F={},P=function(e,n){var t="marker-".concat(n),r="eventName"in e?e.eventLat:e.orgLat,o="eventName"in e?e.eventLng:e.orgLng;if(r&&o){var l="".concat(r,"_").concat(o);F[l]?(r+=(Math.random()-.5)/1500,o+=(Math.random()-.5)/1500):F[l]=!0}return{key:t,lat:r,lng:o,item:e}},T=(0,o.useState)(t?t.map(P):l?l.map(P):[]),O=T[0],B=T[1],G=z.loaded&&!z.google;return z.loaded?G?(0,y.tZ)(a.bZ,{status:"error"},(0,y.tZ)(a.zM,null),"Nous n'avons pas pu charger la carte. \xcates-vous connect\xe9 \xe0 internet ?"):(0,y.tZ)(o.Fragment,null,(0,y.tZ)(f.ZP,{ref:E,defaultCenter:H,defaultZoom:10,center:n,zoom:N,options:function(e){return _},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){var n=e.map,t=e.maps;if(n&&t){if(z.onGoogleApiLoaded&&z.onGoogleApiLoaded(),!_.fullscreenControl){var r=document.createElement("div");(0,b.render)((0,y.tZ)(D,{onClick:p}),r),n.controls[t.ControlPosition.TOP_RIGHT].push(r)}var o=O.map((function(e){var n=e.lat,r=e.lng,o=new t.Marker({position:{lat:n,lng:r}});return o.setVisible(!1),o})),l=new g.Z(n,o,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",minimumClusterSize:2});t.event.addListener(l,"clusteringend",(function(){var e,n=l.getClusters().map((function(e){return e.getMarkers()})).filter((function(e){return e.length>1})).map((function(e){return e.map((function(e){return{lat:e.getPosition().lat(),lng:e.getPosition().lng()}}))}))[0],t=[],r=M(O);try{var o=function(){var r=e.value;if(n&&n.find((function(e){return e.lat===r.lat&&e.lng===r.lng})))return"continue";t.push(r)};for(r.s();!(e=r.n()).done;)o()}catch(a){r.e(a)}finally{r.f()}B(t)}))}},onChange:function(e){A(e.zoom)},style:{position:"relative",flex:1}},O.map((function(e){return(0,y.tZ)(I,{key:e.key,lat:e.lat,lng:e.lng,item:e.item,zoomLevel:N,setItemToShow:S})}))),w&&(0,y.tZ)(Z.n,{onClose:function(){S(null)},header:(0,y.tZ)(o.Fragment,null,(0,y.tZ)(d.xu,{display:"inline-flex",alignItems:"center",maxWidth:"90%"},"eventName"in w?(0,y.tZ)(m.J,{as:v.Q,mr:1,boxSize:6}):(0,y.tZ)(m.J,{as:c.S,mr:1,boxSize:6})," ",(0,y.tZ)(x.rU,{href:"/".concat("eventName"in w?w.eventUrl:w.orgUrl),css:L,size:"larger",className:"rainbow-text"},"eventName"in w?w.eventName:w.orgName)),(0,y.tZ)("br",null),(0,y.tZ)(d.xu,{display:"inline-flex",alignItems:"center"},(0,y.tZ)(m.J,{as:u.N,mr:2,color:"red"}),"eventName"in w?w.eventAddress:w.orgAddress))},(0,y.tZ)(o.Fragment,null,"eventName"in w&&(0,y.tZ)(V.G,{event:w}),(0,y.tZ)(d.xu,{mt:4},"eventName"in w?w.eventDescription&&w.eventDescription.length>0?(0,y.tZ)("div",{className:"ql-editor"},(0,y.tZ)("div",{dangerouslySetInnerHTML:{__html:h().sanitize(w.eventDescription)}})):(0,y.tZ)(s.x,{fontStyle:"italic"},"Aucune description."):w.orgDescription&&w.orgDescription.length>0?(0,y.tZ)("div",{className:"ql-editor"},(0,y.tZ)("div",{dangerouslySetInnerHTML:{__html:h().sanitize(w.orgDescription)}})):(0,y.tZ)(s.x,{fontStyle:"italic"},"Aucune description."))))):(0,y.tZ)(i.$,null)})),F=t(809),P=t.n(F),T=t(92447),O=t(42283),B=t(22051),G=function(e){var n=e.setCenter,t=e.isVisible,r="Limoux, France",l=(0,o.useState)(r),a=l[0],i=l[1],s=(0,O.cI)({mode:"onChange"}),u=s.control,c=(s.register,s.handleSubmit),v=s.errors;s.setError,s.clearErrors,s.watch,s.getValues;return t?(0,y.tZ)("form",{onChange:function(){},onSubmit:c((function(){}))},(0,y.tZ)(x.b$,{name:"eventAddress",control:u,errors:v,defaultValue:r,value:a,noLabel:!0,mb:3,onChange:function(e){i(e)},onClick:function(){i("")},onSuggestionSelect:function(){var e=(0,T.Z)(P().mark((function e(t){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.t0=n,e.next=4,(0,B.X8)(t);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})):null},U=t(1609),j=(0,N.q)({apiKey:"AIzaSyBW6lVlo-kbzkD3bThsccdDilCdb8_CPH8"})((function(e){var n=e.events,t=e.orgs,u=(0,r.Z)(e,["events","orgs"]),c=u.loaded&&!u.google,v=(0,o.useState)(),d=v[0],m=v[1],g=(0,o.useRef)(null),f=(0,o.useState)({defaultSize:{enabled:!0},fullSize:{enabled:!1}}),p=f[0],h=f[1];return(0,y.tZ)(l.u_,{isOpen:u.isOpen,onClose:function(){u.onClose&&u.onClose()},size:p.fullSize.enabled?"full":void 0,closeOnOverlayClick:!0},(0,y.tZ)(l.ZA,null,(0,y.tZ)(l.hz,{my:p.fullSize.enabled?0:void 0,minHeight:!c&&p.defaultSize.enabled?"calc(100vh - 180px)":p.fullSize.enabled?"100vh":void 0},p.defaultSize.enabled&&(0,y.tZ)(o.Fragment,null,(0,y.tZ)(l.xB,null,"Carte des ".concat(n?"\xe9v\xe9nements":"organisations")),(0,y.tZ)(l.ol,null)),(0,y.tZ)(l.fe,{ref:g,p:p.fullSize.enabled?0:void 0,display:"flex",flexDirection:"column"},u.loaded&&u.google&&(0,U.t)(n||t||[])?(0,y.tZ)(o.Fragment,null,(0,y.tZ)(G,{setCenter:m,isVisible:p.defaultSize.enabled}),(0,y.tZ)(_,{center:d,events:n,orgs:t,size:p,onFullscreenControlClick:function(e){h({defaultSize:{enabled:!e},fullSize:{enabled:e}})}})):c?(0,y.tZ)(a.bZ,{status:"error",mb:3},(0,y.tZ)(a.zM,null),"Nous n'avons pas pu charger la carte. \xcates-vous connect\xe9 \xe0 internet ?"):u.loaded?(0,y.tZ)(s.x,null,"Il n'y a encore rien \xe0 afficher sur cette carte, revenez plus tard !"):(0,y.tZ)(i.$,null)))))}))}}]);